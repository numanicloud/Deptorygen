# Deptorygen

Deptorygenã¯C#ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã¨CodeFixã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€
ã‚¯ãƒ©ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ãªãŒã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹DIã‚³ãƒ³ãƒ†ãƒŠã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯ã€ŒDependency Factory Generatorã€ã®ç•¥ã§ã™ã€‚

## å…¥æ‰‹

Nuget Galleryã«ã¦ã€ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

* Deptorygen
* Deptorygen.Annotations

GenericHostã¨ã®é€£æºæ©Ÿèƒ½ãŒå¿…è¦ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

* Deptorygen.GenericHost

## å®Ÿè¡Œ

Visual Studio 2019ã§å‹•ä½œç¢ºèªã—ã¦ã„ã¾ã™ã€‚

å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã€`%ProgramFiles(x86)%\Microsoft Visual Studio\2019\Community\Common7\IDE` ã« .NET Frameworkå‘ã‘ã® `netstandard.dll` ã‚’é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®DLLã¯æã‚‰ãã€ `%ProgramFiles(x86)%\Microsoft Visual Studio\2019\Community\MSBuild\Microsoft\Microsoft.NET.Build.Extensions\net461\lib\nestandard.dll` ã«ã‚ã‚Šã¾ã™ã€‚

Deptorygenãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€ã¾ãšã¯Visual Studioã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å†èµ·å‹•å¾Œã€`[Factory]`å±æ€§ãŒã¤ã„ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¯¾ã—ã¦å‡ºã‚‹ã‚¯ã‚¤ãƒƒã‚¯ãƒ’ãƒ³ãƒˆ(é›»çƒãƒãƒ¼ã‚¯ğŸ’¡)ã‚’é€šã˜ã¦ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ä¾‹

```csharp
using System;
using Deptorygen.Annotations;
using UseDeptorygen.Infra;

namespace UseDeptorygen.Samples.BasicDependency
{
	class Service
	{
		public void Show()
		{
			Console.WriteLine("This is Service!");
		}
	}

	class Client
	{
		private readonly Service _service;

		public Client(Service service)
		{
			_service = service;
		}

		public void Execute()
		{
			Console.WriteLine("# Client");
			_service.Show();
		}
	}

	[Factory]
	interface IFactory
	{
        // Serviceã‚¯ãƒ©ã‚¹ã‚’è§£æ±ºã—ã¦ã‚‚ã‚‰ã„ãŸã„
		Service ResolveService();
        // Clientã‚¯ãƒ©ã‚¹ã¯Serviceã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã—ã¦ã„ã‚‹ã€‚
        // ã“ã‚Œã‚‚è§£æ±ºã—ã¦ã‚‚ã‚‰ã„ãŸã„
		Client ResolveClient();
	}

	class BasicDependencySample : ISample
	{
		public void Run()
		{
			var factory = new Factory();
			factory.ResolveClient().Execute();
			factory.Dispose();
		}
	}
}
```

ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```csharp
// <autogenerated />
using System;
using System.Collections.Generic;

namespace UseDeptorygen.Samples.BasicDependency
{
    internal partial class Factory : IFactory
        , IDisposable
    {
        private Service? _ResolveServiceCache;
        private Client? _ResolveClientCache;

        public Factory()
        {
        }

        public Service ResolveService()
        {
            return _ResolveServiceCache ??= new Service();
        }

        public Client ResolveClient()
        {
            return _ResolveClientCache ??= new Client(ResolveService());
        }

        public void Dispose()
        {
        }
    }
}
```

å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```
# Client
This is Service!
```

## è©³ã—ã„ä½¿ã„æ–¹

[ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](https://github.com/NumAniCloud/Deptorygen/blob/master/Documents/Index.md)ã‚’ã”è¦§ãã ã•ã„ã€‚
